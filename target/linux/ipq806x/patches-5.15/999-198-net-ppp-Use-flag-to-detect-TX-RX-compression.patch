From fd10c4d5a77c1c452808b00f244cb00eaffdbfe1 Mon Sep 17 00:00:00 2001
From: Ratheesh Kannoth <rkannoth@codeaurora.org>
Date: Mon, 16 Nov 2020 17:34:25 +0530
Subject: [PATCH] net: ppp: Use flag to detect TX/RX compression

Signed-off-by: Ratheesh Kannoth <rkannoth@codeaurora.org>
Change-Id: I3068377565fe172b2771b7878a6c933322f6c69e
---
 drivers/net/ppp/ppp_generic.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/net/ppp/ppp_generic.c
+++ b/drivers/net/ppp/ppp_generic.c
@@ -3731,7 +3731,7 @@ bool ppp_is_cp_enabled(struct net_device
 
 	ppp = netdev_priv(dev);
 	ppp_lock(ppp);
-	flag = !!ppp->xcomp || !!ppp->rcomp;
+	flag = !!(ppp->xstate & SC_COMP_RUN) || !!(ppp->rstate & SC_DECOMP_RUN);
 	ppp_unlock(ppp);
 
 	return flag;
