From 7409cf56be668d2b95d0ea908365b71f55f17a7b Mon Sep 17 00:00:00 2001
From: Ratheesh Kannoth <rkannoth@codeaurora.org>
Date: Fri, 27 Nov 2020 07:16:55 +0530
Subject: [PATCH] net: openvswitch: Delay flow delete notification

Notify flow delete event after removing from datapath flow table

Signed-off-by: Ratheesh Kannoth <rkannoth@codeaurora.org>
Change-Id: Ib80da37088b411831d63325b688c64aed7dfecdb
---
 net/openvswitch/datapath.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/net/openvswitch/datapath.c
+++ b/net/openvswitch/datapath.c
@@ -1517,8 +1517,8 @@ static int ovs_flow_cmd_del(struct sk_bu
 		goto unlock;
 	}
 
-	ovs_dp_flow_del_notify(dp, flow);
 	ovs_flow_tbl_remove(&dp->table, flow);
+	ovs_dp_flow_del_notify(dp, flow);
 	ovs_unlock();
 
 	reply = ovs_flow_cmd_alloc_info((const struct sw_flow_actions __force *) flow->sf_acts,
