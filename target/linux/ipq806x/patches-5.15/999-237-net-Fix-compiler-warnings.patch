From aeda176faa65874e63b67720e734cada68801f45 Mon Sep 17 00:00:00 2001
From: Gaurao Chaudhari <gaurchau@codeaurora.org>
Date: Fri, 26 Apr 2019 10:54:05 -0700
Subject: [PATCH] net: Fix compiler warnings

Types of warnings: -Wdeclaration-after-statement, -Wunused-variable

Change-Id: If83a586bb0a764cc0d0cdb0e6b4d165c069bff44
Signed-off-by: Gaurao Chaudhari <gaurchau@codeaurora.org>
Signed-off-by: Tian Yang <tiany@codeaurora.org>
---
 net/core/skbuff_recycle.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

--- a/net/core/skbuff_recycle.c
+++ b/net/core/skbuff_recycle.c
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2013-2016, The Linux Foundation. All rights reserved.
+ * Copyright (c) 2013-2016, 2019, The Linux Foundation. All rights reserved.
  *
  * Permission to use, copy, modify, and/or distribute this software for any
  * purpose with or without fee is hereby granted, provided that the above
@@ -506,6 +506,9 @@ static void skb_recycler_init_procfs(voi
 void __init skb_recycler_init(void)
 {
 	int cpu;
+#ifdef CONFIG_SKB_RECYCLER_MULTI_CPU
+	unsigned int i;
+#endif
 
 	for_each_possible_cpu(cpu) {
 		skb_queue_head_init(&per_cpu(recycle_list, cpu));
@@ -517,7 +520,6 @@ void __init skb_recycler_init(void)
 	}
 
 	spin_lock_init(&glob_recycler.lock);
-	unsigned int i;
 
 	for (i = 0; i < SKB_RECYCLE_MAX_SHARED_POOLS; i++)
 		skb_queue_head_init(&glob_recycler.pool[i]);
@@ -550,7 +552,6 @@ void skb_recycler_print_all_lists(void)
 	preempt_disable();
 	local_irq_save(flags);
 	for_each_possible_cpu(cpu) {
-		unsigned long flags;
 		struct sk_buff_head *h;
 
 		h = &per_cpu(recycle_spare_list, cpu);
@@ -563,7 +564,6 @@ void skb_recycler_print_all_lists(void)
 	preempt_disable();
 	local_irq_save(flags);
 	for_each_possible_cpu(cpu) {
-		unsigned long flags;
 		struct sk_buff_head *h;
 
 		h = &per_cpu(recycle_list, cpu);
